# 两级视图功能快速测试指南

## 🚀 立即测试

### 前提条件
- ✅ 后端服务已启动（http://localhost:5000）
- ✅ 前端代码已更新
- ✅ 数据库中有想法数据

### 测试步骤

#### 1. 刷新前端页面
```bash
# 如果前端正在运行，直接刷新浏览器
# 如果没有运行，启动前端：
npm run dev
```

#### 2. 验证 Level 1（宏观视图）

**期望看到：**
- 右上角显示 "🌐 宏观视图 (X 想法)"
- 所有想法显示为蓝色圆形节点
- 节点之间有连线（边）
- 边的粗细不同（反映相似度）
- 右下角有相似度阈值滑块

**测试操作：**
1. 观察图谱布局
2. 悬停在边上，应该显示相似度百分比
3. 拖动右下角的滑块，观察边的变化

#### 3. 测试 Level 1 → Level 2 转换

**操作：**
1. 点击任意一个想法节点（蓝色圆圈）

**期望结果：**
- 图谱平滑转换（500ms 动画）
- 右上角变为 "🔬 微观视图"
- 显示该想法的详细实体关系图
- 节点颜色多样化（按类型）
- 左上角出现 "← 返回概览" 按钮
- 左下角显示想法摘要

#### 4. 测试 Level 2 → Level 1 转换

**方法 A：点击返回按钮**
1. 点击左上角的 "← 返回概览" 按钮
2. 应该平滑返回宏观视图

**方法 B：使用键盘快捷键**
1. 按 ESC 键
2. 应该立即返回宏观视图

#### 5. 测试相似度阈值调整

**操作：**
1. 确保在 Level 1 视图
2. 找到右下角的滑块
3. 向左拖动（降低阈值）
4. 向右拖动（提高阈值）

**期望结果：**
- 阈值降低：显示更多边（包括相似度较低的）
- 阈值提高：只显示高相似度的边
- 实时更新，无需刷新

## 🎯 功能验证清单

### Level 1（宏观视图）
- [ ] 显示所有想法节点
- [ ] 节点颜色统一（蓝色）
- [ ] 边的粗细反映相似度
- [ ] 边的透明度反映相似度
- [ ] 悬停显示相似度百分比
- [ ] 右上角显示级别指示器
- [ ] 右下角显示阈值控制器
- [ ] 点击节点可以转换到 Level 2

### Level 2（微观视图）
- [ ] 显示选中想法的实体节点
- [ ] 节点按类型着色
- [ ] 显示关系边和标签
- [ ] 左上角显示返回按钮
- [ ] 右上角显示级别指示器
- [ ] 左下角显示想法摘要
- [ ] 点击返回按钮回到 Level 1
- [ ] ESC 键回到 Level 1

### 交互功能
- [ ] 节点可拖动
- [ ] 图谱可缩放（鼠标滚轮）
- [ ] 图谱可平移（拖动背景）
- [ ] 转换动画流畅
- [ ] 阈值调整实时生效

## 🐛 常见问题

### Q: 刷新后看不到图谱
**A:** 检查以下几点：
1. 后端服务是否运行
2. 浏览器控制台是否有错误
3. 数据库中是否有想法

### Q: 点击节点没有反应
**A:** 
1. 确保在 Level 1 视图
2. 检查控制台是否有错误
3. 尝试刷新页面

### Q: 相似度阈值调整无效
**A:**
1. 确保在 Level 1 视图
2. 检查是否至少有 2 个想法
3. 尝试降低阈值到 0.5

### Q: 图谱显示为旧版样式
**A:**
1. 检查 graphData 是否为 null
2. 查看控制台错误信息
3. 确保 GraphLevelManager 正确初始化

## 📸 预期效果截图说明

### Level 1 应该看起来像这样：
```
┌─────────────────────────────────────────────┐
│                    🌐 宏观视图 (5 想法)      │
│                                             │
│         ●─────────●                         │
│         │         │                         │
│         │    ●────┼────●                    │
│         │    │    │    │                    │
│         ●────┼────●    │                    │
│              │         │                    │
│              ●─────────●                    │
│                                             │
│                          [相似度阈值: 0.70] │
│                          ━━━━━━━━━━━━━━━━━ │
│                          0.5          1.0   │
└─────────────────────────────────────────────┘
```

### Level 2 应该看起来像这样：
```
┌─────────────────────────────────────────────┐
│ ← 返回概览              🔬 微观视图          │
│                                             │
│    [Concept]──solves──[Problem]             │
│        │                                    │
│   powered_by                                │
│        │                                    │
│    [Tool]──────enables──[Solution]          │
│                                             │
│  ┌─────────────────────────────────┐       │
│  │ AI 摘要                         │       │
│  │ 这是一个关于去中心化身份的想法... │       │
│  └─────────────────────────────────┘       │
└─────────────────────────────────────────────┘
```

## ✅ 测试完成标准

当你能够：
1. ✅ 看到 Level 1 宏观视图
2. ✅ 点击节点进入 Level 2
3. ✅ 使用返回按钮或 ESC 键返回
4. ✅ 调整相似度阈值并看到效果
5. ✅ 所有动画流畅运行

**恭喜！两级视图功能已经成功集成并正常工作！** 🎉

## 🎬 下一步

测试完成后，你可以：
1. 创建更多想法，观察图谱变化
2. 尝试不同的相似度阈值
3. 探索不同想法的微观结构
4. 继续实现其他任务（多选、进化命令等）

祝你使用愉快！🚀
